{"version":3,"file":"theme.js","sources":["../src/js/expander-menu.js","../src/js/expander.js"],"sourcesContent":["function setupExpanderMenu(menu) {\n\t// Select only the direct <li> children that actually have a submenu\n\t// const parents = menu.querySelectorAll('li:has(> ul)');\n\tconst parents = [];\n\tconst submenus = menu.querySelectorAll('ul');\n\tfor (const submenu of submenus) {\n\t\tparents.push(submenu.parentElement);\n\t}\n\n\tparents.forEach((li) => {\n\t\tconst submenu = li.querySelector('ul');\n\t\tconst link = li.querySelector(':scope > a');\n\t\tif (!submenu || !link) return;\n\n\t\t// 1. Ensure the submenu has a unique ID\n\t\tsubmenu.id ||= li.id ? `${li.id}_submenu` : `expander-${crypto.randomUUID()}`;\n\n\t\t// 2. Create the btn button\n\t\tconst btn = document.createElement('button');\n\t\tbtn.classList.add('btn--link');\n\t\tbtn.dataset.expand = submenu.id;\n\t\tbtn.classList.add('expander-toggle');\n\n\t\tconst linkHref = link.getAttribute('href');\n\t\tconst isPlaceholder = !linkHref || linkHref === '#';\n\n\t\tif (isPlaceholder) {\n\t    \t// Transfer all attributes (except href) from link to button\n\t  \t  \t[...link.attributes].forEach(attr => {\n\t\t\t\tif (attr.name !== 'href') btn.setAttribute(attr.name, attr.value);\n\t\t\t});\n\t\t\tbtn.innerHTML = link.innerHTML.trim();\n\t\t\tlink.replaceWith(btn);\n\t\t} else {\n\t\t\t// Link is a real URL: add a separate button\n\t\t\tbtn.ariaLabel = `Toggle ${link.textContent.trim()} submenu`;\n\t\t\tli.append(btn);\n\t\t}\n\t});\n}\n\nconst menu = document.getElementById('primary-menu');\nif (menu) setupExpanderMenu(menu);\n\nexport { setupExpanderMenu }\n\n\n\n","class Expander {\n\tconstructor(button, options = {}) {\n\t\tconst contentId = button.getAttribute('data-expand');\n\t\tthis.content = document.getElementById(contentId);\n\t\tif (!this.content) return;\n\n\t\tthis.button = button;\n\t\tthis.parent = button.parentElement;\n\t\tthis.settings = Object.freeze({ collapseOnOutsideClick: true, ...options });\n\n\t\tthis.init();\n\t}\n\n\tget isOpen() {\n\t\treturn this.button.getAttribute('aria-expanded') === 'true';\n\t}\n\n\tset isOpen(value) {\n\t\tthis.button.setAttribute('aria-expanded', !!value);\n\t\tthis.content.setAttribute('aria-hidden', !value);\n\t}\n\n\tinit() {\n\t\tthis.button.setAttribute('aria-controls', this.content.id);\n\t\tthis.isOpen = false; // Initial state\n\n\t\tdocument.addEventListener('click', this.handleEvents);\n\t\tthis.parent.addEventListener('keydown', this.handleEvents);\n\t\tthis.parent.addEventListener('focusout', this.handleEvents);\n\t}\n\n\thandleEvents = (e) => {\n\t\t// 1. Handle Escape key\n\t\tif (e.type === 'keydown' && e.key === 'Escape' && this.isOpen) {\n\t\t\te.stopPropagation();\n\t\t\tif (this.content.contains(document.activeElement)) {\n\t\t\t\tthis.button.focus();\n\t\t\t}\n\t\t\tthis.isOpen = false;\n\t\t}\n\n\t\t// 2. Handle Clicks (Toggle or Outside Click)\n\t\tif (e.type === 'click') {\n\t\t\tif (this.button.contains(e.target)) {\n\t\t\t\tthis.isOpen = !this.isOpen;\n\t\t\t} else if (this.settings.collapseOnOutsideClick && !this.parent.contains(e.target)) {\n\t\t\t\tthis.isOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// 3. Handle Focus Leaving the component (Replaces Blur)\n\t\tif (e.type === 'focusout' && e.relatedTarget && !this.parent.contains(e.relatedTarget)) {\n\t\t\tthis.isOpen = false;\n\t\t}\n\t}\n}\n\nfunction instantiateExpanders () {\n\tconst expanders = document.querySelectorAll('[data-expand]');\n\tif (!expanders.length) return;\n\tfor (const expander of expanders) {\n\t\tnew Expander(expander);\n\t}\n}\ninstantiateExpanders()\n\nexport { Expander }\n"],"names":[],"mappings":"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"}