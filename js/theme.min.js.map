{"version":3,"file":"theme.min.js","sources":["../src/js/expander-menu.js","../src/js/expander.js"],"sourcesContent":["function setupExpanderMenu(menu) {\n\t// Select only the direct <li> children that actually have a submenu\n\t// const parents = menu.querySelectorAll('li:has(> ul)');\n\tconst parents = [];\n\tconst submenus = menu.querySelectorAll('ul');\n\tfor (const submenu of submenus) {\n\t\tparents.push(submenu.parentElement);\n\t}\n\n\tparents.forEach((li) => {\n\t\tconst submenu = li.querySelector('ul');\n\t\tconst link = li.querySelector(':scope > a');\n\t\tif (!submenu || !link) return;\n\n\t\t// 1. Ensure the submenu has a unique ID\n\t\tsubmenu.id ||= li.id ? `${li.id}_submenu` : `expander-${crypto.randomUUID()}`;\n\n\t\t// 2. Create the btn button\n\t\tconst btn = document.createElement('button');\n\t\tbtn.classList.add('btn--link');\n\t\tbtn.dataset.expand = submenu.id;\n\t\tbtn.classList.add('expander-toggle');\n\n\t\tconst linkHref = link.getAttribute('href');\n\t\tconst isPlaceholder = !linkHref || linkHref === '#';\n\n\t\tif (isPlaceholder) {\n\t    \t// Transfer all attributes (except href) from link to button\n\t  \t  \t[...link.attributes].forEach(attr => {\n\t\t\t\tif (attr.name !== 'href') btn.setAttribute(attr.name, attr.value);\n\t\t\t});\n\t\t\tbtn.innerHTML = link.innerHTML.trim();\n\t\t\tlink.replaceWith(btn);\n\t\t} else {\n\t\t\t// Link is a real URL: add a separate button\n\t\t\tbtn.ariaLabel = `Toggle ${link.textContent.trim()} submenu`;\n\t\t\tli.append(btn);\n\t\t}\n\t});\n}\n\nconst menu = document.getElementById('primary-menu');\nif (menu) setupExpanderMenu(menu);\n\nexport { setupExpanderMenu }\n\n\n\n","class Expander {\n\tconstructor(button, options = {}) {\n\t\tconst contentId = button.getAttribute('data-expand');\n\t\tthis.content = document.getElementById(contentId);\n\t\tif (!this.content) return;\n\n\t\tthis.button = button;\n\t\tthis.parent = button.parentElement;\n\t\tthis.settings = Object.freeze({ collapseOnOutsideClick: true, ...options });\n\n\t\tthis.init();\n\t}\n\n\tget isOpen() {\n\t\treturn this.button.getAttribute('aria-expanded') === 'true';\n\t}\n\n\tset isOpen(value) {\n\t\tthis.button.setAttribute('aria-expanded', !!value);\n\t\tthis.content.setAttribute('aria-hidden', !value);\n\t}\n\n\tinit() {\n\t\tthis.button.setAttribute('aria-controls', this.content.id);\n\t\tthis.isOpen = false; // Initial state\n\n\t\tdocument.addEventListener('click', this.handleEvents);\n\t\tthis.parent.addEventListener('keydown', this.handleEvents);\n\t\tthis.parent.addEventListener('focusout', this.handleEvents);\n\t}\n\n\thandleEvents = (e) => {\n\t\t// 1. Handle Escape key\n\t\tif (e.type === 'keydown' && e.key === 'Escape' && this.isOpen) {\n\t\t\te.stopPropagation();\n\t\t\tif (this.content.contains(document.activeElement)) {\n\t\t\t\tthis.button.focus();\n\t\t\t}\n\t\t\tthis.isOpen = false;\n\t\t}\n\n\t\t// 2. Handle Clicks (Toggle or Outside Click)\n\t\tif (e.type === 'click') {\n\t\t\tif (this.button.contains(e.target)) {\n\t\t\t\tthis.isOpen = !this.isOpen;\n\t\t\t} else if (this.settings.collapseOnOutsideClick && !this.parent.contains(e.target)) {\n\t\t\t\tthis.isOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// 3. Handle Focus Leaving the component (Replaces Blur)\n\t\tif (e.type === 'focusout' && e.relatedTarget && !this.parent.contains(e.relatedTarget)) {\n\t\t\tthis.isOpen = false;\n\t\t}\n\t}\n}\n\nfunction instantiateExpanders () {\n\tconst expanders = document.querySelectorAll('[data-expand]');\n\tif (!expanders.length) return;\n\tfor (const expander of expanders) {\n\t\tnew Expander(expander);\n\t}\n}\ninstantiateExpanders()\n\nexport { Expander }\n"],"names":["menu","document","getElementById","parents","submenus","querySelectorAll","submenu","push","parentElement","forEach","li","querySelector","link","id","crypto","randomUUID","btn","createElement","classList","add","dataset","expand","linkHref","getAttribute","attributes","attr","name","setAttribute","value","innerHTML","trim","replaceWith","ariaLabel","textContent","append","setupExpanderMenu","Expander","constructor","button","options","contentId","this","content","parent","settings","Object","freeze","collapseOnOutsideClick","init","isOpen","addEventListener","handleEvents","e","type","key","stopPropagation","contains","activeElement","focus","target","relatedTarget","expanders","length","expander","instantiateExpanders"],"mappings":"yBAyCA,MAAMA,EAAOC,SAASC,eAAe,gBACjCF,GA1CJ,SAA2BA,GAG1B,MAAMG,EAAU,GACVC,EAAWJ,EAAKK,iBAAiB,MACvC,IAAK,MAAMC,KAAWF,EACrBD,EAAQI,KAAKD,EAAQE,eAGtBL,EAAQM,QAASC,IAChB,MAAMJ,EAAUI,EAAGC,cAAc,MAC3BC,EAAOF,EAAGC,cAAc,cAC9B,IAAKL,IAAYM,EAAM,OAGvBN,EAAQO,KAAOH,EAAGG,GAAK,GAAGH,EAAGG,aAAe,YAAYC,OAAOC,eAG/D,MAAMC,EAAMf,SAASgB,cAAc,UACnCD,EAAIE,UAAUC,IAAI,aAClBH,EAAII,QAAQC,OAASf,EAAQO,GAC7BG,EAAIE,UAAUC,IAAI,mBAElB,MAAMG,EAAWV,EAAKW,aAAa,SACZD,GAAyB,MAAbA,GAI9B,IAAIV,EAAKY,YAAYf,QAAQgB,IACd,SAAdA,EAAKC,MAAiBV,EAAIW,aAAaF,EAAKC,KAAMD,EAAKG,SAE5DZ,EAAIa,UAAYjB,EAAKiB,UAAUC,OAC/BlB,EAAKmB,YAAYf,KAGjBA,EAAIgB,UAAY,UAAUpB,EAAKqB,YAAYH,iBAC3CpB,EAAGwB,OAAOlB,KAGb,CAGUmB,CAAkBnC,GC1C5B,MAAMoC,EACL,WAAAC,CAAYC,EAAQC,EAAU,IAC7B,MAAMC,EAAYF,EAAOf,aAAa,eACtCkB,KAAKC,QAAUzC,SAASC,eAAesC,GAClCC,KAAKC,UAEVD,KAAKH,OAASA,EACdG,KAAKE,OAASL,EAAO9B,cACrBiC,KAAKG,SAAWC,OAAOC,OAAO,CAAEC,wBAAwB,KAASR,IAEjEE,KAAKO,OACN,CAEA,UAAIC,GACH,MAAqD,SAA9CR,KAAKH,OAAOf,aAAa,gBACjC,CAEA,UAAI0B,CAAOrB,GACVa,KAAKH,OAAOX,aAAa,kBAAmBC,GAC5Ca,KAAKC,QAAQf,aAAa,eAAgBC,EAC3C,CAEA,IAAAoB,GACCP,KAAKH,OAAOX,aAAa,gBAAiBc,KAAKC,QAAQ7B,IACvD4B,KAAKQ,QAAS,EAEdhD,SAASiD,iBAAiB,QAAST,KAAKU,cACxCV,KAAKE,OAAOO,iBAAiB,UAAWT,KAAKU,cAC7CV,KAAKE,OAAOO,iBAAiB,WAAYT,KAAKU,aAC/C,CAEAA,aAAgBC,IAEA,YAAXA,EAAEC,MAAgC,WAAVD,EAAEE,KAAoBb,KAAKQ,SACtDG,EAAEG,kBACEd,KAAKC,QAAQc,SAASvD,SAASwD,gBAClChB,KAAKH,OAAOoB,QAEbjB,KAAKQ,QAAS,GAIA,UAAXG,EAAEC,OACDZ,KAAKH,OAAOkB,SAASJ,EAAEO,QAC1BlB,KAAKQ,QAAUR,KAAKQ,OACVR,KAAKG,SAASG,yBAA2BN,KAAKE,OAAOa,SAASJ,EAAEO,UAC1ElB,KAAKQ,QAAS,IAKD,aAAXG,EAAEC,MAAuBD,EAAEQ,gBAAkBnB,KAAKE,OAAOa,SAASJ,EAAEQ,iBACvEnB,KAAKQ,QAAS,KAKjB,WACC,MAAMY,EAAY5D,SAASI,iBAAiB,iBAC5C,GAAKwD,EAAUC,OACf,IAAK,MAAMC,KAAYF,EACtB,IAAIzB,EAAS2B,EAEf,CACAC"}