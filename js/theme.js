!function(){"use strict";function t(t,e={},s=document){if(!t)return;let i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});return s.dispatchEvent(i)}function e(t){return 1===t.length&&t.match(/\S/)}function s(e,s="a",i={}){if(!e)return;if(!(e instanceof Element))throw new Error("No toggle element passed in.");let n=e.getAttribute("data-expand");if(!n)return;let o=document.getElementById(n);if(!o)return;let r=Object.assign({setMaxHeight:!1,setAriaHidden:!0,onOutsideClick:!1,shiftFocus:!0,accordion:!1},i);Object.freeze(r),this.toggle=e,this.menuId=n,this.menu=o,this.parent=e.closest("[data-expand-parent]"),this.settings=r,this.expanded=!!o.getAttribute("data-expand-open"),this.firstMenuItem=!1,this.lastMenuItem=!1,this.currentMenuItem=!1,this.firstChars=[],this.menuItems=[],this.expand=this.expand.bind(this),this.collapse=this.collapse.bind(this),this.setFocusToItem=this.setFocusToItem.bind(this),this.setFocusToFirstItem=this.setFocusToFirstItem.bind(this),this.setFocusToLastItem=this.setFocusToLastItem.bind(this),this.setFocusToPrevItem=this.setFocusToPrevItem.bind(this),this.setFocusToNextItem=this.setFocusToNextItem.bind(this),this.setFocusByFirstChar=this.setFocusByFirstChar.bind(this),this.onOutsideClick=this.onOutsideClick.bind(this),this.onToggleClick=this.onToggleClick.bind(this),this.onToggleKeydown=this.onToggleKeydown.bind(this),this.onMenuKeydown=this.onMenuKeydown.bind(this);let a=o.querySelectorAll(s);if(a.length)for(let t of a)this.menuItems.push(t),t.tabIndex=-1,this.firstChars.push(t.textContent.trim()[0].toLowerCase()),this.firstMenuItem||(this.firstMenuItem=t),this.lastMenuItem=t;this.toggle.setAttribute("aria-controls",this.menuId),this.menu.hasAttribute("aria-labelledby")||this.menu.setAttribute("aria-label",this.toggle.innerText),this.expanded?this.expand():this.collapse(),this.toggle.addEventListener("click",this.onToggleClick,!1),this.toggle.addEventListener("keydown",this.onToggleKeydown,!1),this.parent&&this.settings.onOutsideClick&&document.addEventListener("click",this.onOutsideClick,!1),t("MenuToggle:ready",{MenuToggle:this,expanded:this.expanded})}s.prototype.expand=function(){return this.toggle.setAttribute("aria-expanded","true"),this.parent&&this.parent.setAttribute("aria-expanded","true"),this.settings.setAriaHidden&&this.menu.removeAttribute("aria-hidden"),this.settings.setMaxHeight&&(this.menu.style.maxHeight=this.menu.scrollHeight+"px"),this.expanded=!0,this.menu.addEventListener("keydown",this.onMenuKeydown,!1),this.menu.addEventListener("focusin",this.onFocusin,!1),this.menu.addEventListener("focusout",this.onFocusout,!1),this.menu.addEventListener("mouseOver",this.onMenuMouseover,!1),t("MenuToggle:expand",{MenuToggle:this,expanded:this.expanded}),this},s.prototype.collapse=function(){return this.toggle.setAttribute("aria-expanded","false"),this.expanded=!1,this.currentMenuItem=!1,this.parent&&this.parent.setAttribute("aria-expanded","false"),this.settings.setAriaHidden&&this.menu.setAttribute("aria-hidden",""),this.settings.setMaxHeight&&(this.menu.style.maxHeight=null),this.menu.removeEventListener("keydown",this.onMenuKeydown,!1),this.menu.removeEventListener("focusin",this.onFocusin,!1),this.menu.removeEventListener("focusout",this.onFocusout,!1),this.menu.removeEventListener("mouseOver",this.onMenuMouseover,!1),t("MenuToggle:collapse",{MenuToggle:this,expanded:this.expanded}),this},s.prototype.setFocusToItem=function(t){for(let e of this.menuItems)t===e?(e.tabIndex=0,e.focus(),this.currentMenuItem=e):e.tabIndex=-1},s.prototype.setFocusToFirstItem=function(){this.setFocusToItem(this.firstMenuItem)},s.prototype.setFocusToLastItem=function(){this.setFocusToItem(this.LastMenuItem)},s.prototype.setFocusToPrevItem=function(){if(!this.currentMenuItem)return;let t,e;this.currentMenuItem===this.firstMenuItem?t=this.lastMenuItem:(e=this.menuItems.indexOf(this.currentMenuItem),t=this.menuItems[e-1]),this.setFocusToItem(t)},s.prototype.setFocusToNextItem=function(){if(!this.currentMenuItem)return;let t,e;this.currentMenuItem===this.lastMenuItem?t=this.firstMenuItem:(e=this.menuItems.indexOf(this.currentMenuItem),t=this.menuItems[e+1]),this.setFocusToItem(t)},s.prototype.setFocusByFirstChar=function(t){if(t.length>1)return;t=t.toLowerCase();let e=this.menuItems.indexOf(this.currentMenuItem)+1,s=this.firstChars.indexOf(t,e);s=-1===s?this.firstChars.indexOf(t,0):s,s>-1&&this.setFocusToMenuItem(this.menuItems[s])},s.prototype.onOutsideClick=function(t){if(!this.menu.contains(t.target)&&this.expanded)return this.collapse(),this},s.prototype.onToggleKeydown=function(t){let e=!1;switch(t.key){case" ":case"Enter":case"ArrowDown":case"Down":this.expand(),this.setFocusToFirstItem(),e=!0;break;case"Esc":case"Escape":this.collapse(),this.toggle.focus(),e=!0;break;case"Up":case"ArrowUp":this.expand(),this.setFocusToLastItem(),e=!0}e&&(t.stopPropagation(),t.preventDefault())},s.prototype.onFocusin=function(t){let e=t.target.closest("a");e&&e.classList.add("focus")},s.prototype.onFocusout=function(t){let e=t.target.closest("a");e&&e.classList.remove("focus")},s.prototype.onToggleClick=function(t){this.expanded?(this.collapse(),this.toggle.focus()):(this.expand(),this.setFocusToFirstItem()),t.stopPropagation(),t.preventDefault()},s.prototype.onMenuMouseover=function(t){let e=t.target.closest("a");e&&e.focus()},s.prototype.onMenuKeydown=function(s){if(!this.menu.contains(s.target))return;let i=s.currentTarget,n=s.key,o=!1;if(!(s.ctrlKey||s.altKey||s.metaKey)){if(s.shiftKey)e(n)&&(this.setFocusByFirstChar(i,n),o=!0),"Tab"===n&&(this.toggleEl.focus(),this.collapse(),o=!0);else switch(n){case" ":window.location.href=i.href;break;case"Esc":case"Escape":this.collapse(),this.toggleEl.focus(),o=!0;break;case"Up":case"ArrowUp":this.setFocusToPrevItem(i),o=!0;break;case"ArrowDown":case"Down":this.setFocusToNextItem(i),o=!0;break;case"Home":case"PageUp":this.setFocusToFirstItem(),o=!0;break;case"End":case"PageDown":this.setFocusToLastItem(),o=!0;break;case"Tab":this.collapse();break;default:e(n)&&(this.setFocusByFirstChar(i,n),o=!0)}o&&(s.stopPropagation(),s.preventDefault()),t("MenuToggle:menuKeydown",{MenuToggle:this})}},document.addEventListener("DOMContentLoaded",(function(){let t=document.querySelectorAll("[data-expand]");if(t.length)for(let e of t)new s(e)}),!1),function(){let t=document.querySelector("[data-toggle-color-scheme]");if(!t)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),s=localStorage.getItem("color-scheme"),i=document.body.getAttribute("data-color-scheme");i=i||"light",s?i=s:e.matches&&(i="dark"),t.setAttribute("data-toggle-color-scheme",i),document.body.setAttribute("data-color-scheme",i),document.addEventListener("click",(function(t){let e=t.target.closest("[data-toggle-color-scheme]");e&&(i="dark"===i?"light":"dark",e.setAttribute("data-toggle-color-scheme",i),document.body.setAttribute("data-color-scheme",i),localStorage.setItem("color-scheme",i))}),!1)}(),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".share-link:not(.share-link-email)").length&&document.addEventListener("click",(function(t){if(!t.target.closest(".share-link:not(.share-link-email)"))return;const e=this.href;if(!/^(f|ht)tps?:\/\//i.test(e)&&!/^mailto/i.test(e))return;t.preventDefault();const s=screen.width/2-250,i=screen.height/2-150;window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=500,height=300,top="+i+",left="+s)}),!1)}),!1)}();
//# sourceMappingURL=theme.js.map
